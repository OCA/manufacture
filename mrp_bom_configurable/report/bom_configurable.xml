<?xml version="1.0" encoding="utf-8" ?>
<odoo>

    <template id="report_conditional_bom">
        <div class="o_mrp_bom_report_page container py-3 py-lg-5 px-0 bg-view">
            <div t-if="data.get('lines')">
                <div class="px-3 mb-5">
                    <h1>BoM Overview</h1>
                     <h3 t-esc="data['name']" />
                    <hr t-if="data['bom_code']" />
                    <h6 t-if="data['bom_code']">Reference: <t
                            t-esc="data['bom_code']"
                        /></h6>
                </div>
                <t t-set="currency" t-value="data['currency']" />
                 <table class="o_mrp_bom_expandable table">
                    <thead>
                        <tr>
                            <th name="th_mrp_bom_h">Product</th>
                            <th class="text-end">Quantity</th>
                            <th class="text-end" groups="uom.group_uom" />
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td name="td_mrp_bom" t-esc="data['name']" />
                            <td
                                class="text-end"
                                t-esc="data['quantity']"
                                t-options='{"widget": "float", "decimal_precision": "Product Unit of Measure"}'
                            />
                            <td
                                class="text-start"
                                groups="uom.group_uom"
                                t-esc="data['uom_name']"
                            />
                        </tr>
                        <t t-call="mrp_bom_configurable.report_conditional_bom_line" />
                    </tbody>
                 </table>
            </div>
            <div
                t-else=""
                class="d-flex align-items-center justify-content-center h-50"
            >
                <h4 class="text-muted">No data available.</h4>
            </div>
        </div>
    </template>

    <template id="report_conditional_bom_line">
        <t t-set="currency" t-value="data['currency']" />
        <t t-foreach="data['lines']" t-as="l">
            <tr
                t-if="l['visible'] and (l['type'] != 'operation' or data['show_operations'])"
            >
                <!-- <t t-debug=""></t> -->
                <td name="td_mrp_code">
                    <span t-attf-style="margin-left: {{ str(l['level'] * 20) }}px" />
                    <span t-esc="l['name']" />
                </td>
                <td class="text-end">
                    <t
                        t-if="l['type'] == 'operation'"
                        t-esc="l['quantity']"
                        t-options='{"widget": "float_time"}'
                    />
                    <t
                        t-else=""
                        t-esc="l['quantity']"
                        t-options='{"widget": "float", "decimal_precision": "Product Unit of Measure"}'
                    />
                </td>
                <td class="text-start" groups="uom.group_uom">
                    <t t-esc="l['uom']" />
                </td>
            </tr>
        </t>
    </template>

    <template id="bom_configurable">
        <t t-set="data_report_landscape" t-value="True" />
        <t t-call="web.basic_layout">
            <t t-foreach="docs" t-as="data">
                <div class="page">
                    <t t-call="mrp_bom_configurable.report_conditional_bom" />
                </div>
                <p style="page-break-before:always;"> </p>
            </t>
        </t>
    </template>

</odoo>
