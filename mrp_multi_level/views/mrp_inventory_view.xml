<?xml version="1.0"?>
<odoo>

	<record model="ir.ui.view" id="mrp_inventory_form">
		<field name="name">mrp.inventory.form</field>
		<field name="model">mrp.inventory</field>
		<field name="type">form</field>
		<field name="arch" type="xml">
			<form string="MRP Area">
				<group>
					<field name="mrp_area_id"/>
					<field name="mrp_product_id"/>
					<field name="date"/>
					<field name="initial_on_hand_qty"/>
					<field name="demand_qty"/>
					<field name="supply_qty"/>
					<field name="final_on_hand_qty"/>
					<field name="to_procure"/>
				</group>
			</form>
		</field>
	</record>

	<record model="ir.ui.view" id="mrp_inventory_tree">
		<field name="name">mrp.inventory.tree</field>
		<field name="model">mrp.inventory</field>
		<field name="type">form</field>
		<field name="arch" type="xml">
			<tree string="MRP Inventory">
				<field name="mrp_area_id"/>
				<field name="mrp_product_id"/>
				<field name="date"/>
				<field name="initial_on_hand_qty"/>
				<field name="demand_qty"/>
				<field name="supply_qty"/>
				<field name="final_on_hand_qty"/>
				<field name="to_procure"/>
                <!--TODO: use same procurement wizard as ddmrp?-->
				<button string="Create Procurement"
						name="%(mrp_multi_level.act_mrp_inventory_procure)d"
						icon="fa-cogs" type="action"
						attrs="{'invisible':[('to_procure','==',0.0)]}"/>
			</tree>
		</field>
	</record>

	<record model="ir.ui.view" id="mrp_inventory_search">
		<field name="name">mrp.inventory.search</field>
		<field name="model">mrp.inventory</field>
		<field name="type">search</field>
		<field name="arch" type="xml">
			<search string="MRP Inventory">
				<group name="select" expand="0" string="Selection...">
					<field name="mrp_product_id" select='1'/>
					<field name="mrp_area_id" select='1'/>
				</group>
				<separator/>
				<filter string="To Procure" name="filter_to_procure"
						domain="[['to_procure','>',0.0]]"/>
				<separator/>
				<group expand="0" string="Group By...">
					<filter string="Product"
							context="{'group_by':'mrp_product_id'}"/>
					<filter string="MRP Area"
							context="{'group_by':'mrp_area_id'}"/>
				</group>
			</search>
		</field>
	</record>

	<record model="ir.actions.act_window" id="mrp_inventory_action">
		<field name="sequence" eval="20"/>
		<field name="name">MRP Inventory</field>
		<field name="res_model">mrp.inventory</field>
		<field name="type">ir.actions.act_window</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref="mrp_inventory_tree"/>
		<field name="search_view_id" ref="mrp_inventory_search"/>
		<field name="act_window_id" ref="mrp_inventory_form"/>
	</record>

	<!--TODO: remove?-->
	<record model="ir.actions.act_window.view" id="mrp_inventory_form_action">
		<field name="sequence" eval="22"/>
		<field name="view_mode">form</field>
		<field name="view_id" ref="mrp_inventory_form"/>
		<field name="act_window_id" ref="mrp_inventory_action"/>
	</record>
	<record model="ir.actions.act_window.view" id="mrp_inventory_tree_action">
		<field name="sequence" eval="20"/>
		<field name="view_mode">tree</field>
		<field name="view_id" ref="mrp_inventory_tree"/>
		<field name="act_window_id" ref="mrp_inventory_action"/>
	</record>

</odoo>
